;File Encoding: UTF-8 with BOM

;サクラエディタのタイプ別設定参考画面
;これを見ながら色とか調整していってね！！

;ここの行はコメントだから、最初にコメントの色を設定するといいと思うよ
;カラー設定の該当する項目を[項目]で示しています。
;[テキスト]であれば、タイプ別設定のカラーで[テキスト]の色を変えるとちゃんと変わります

;それでは、カスタマイズして楽しいeraLifeを！


;--------------------------------------------------------------------
;言わずもがな、最初はテキスト
;[テキスト]
;--------------------------------------------------------------------
テキストだよ！
;コメントと違う色になってますか？


;--------------------------------------------------------------------
;空白文字。3つとも見えないとちょっと面倒よ
;左から順番に[TAB記号][半角空白][全角空白]
;--------------------------------------------------------------------
[	][ ][　]
;コメント中だとタブ以外は消えてる？　みえてる？[	][ ][　]

;--------------------------------------------------------------------
;ERBの命令全般
;[強調キーワード1]
;--------------------------------------------------------------------
PRINTFORM RETURN ALIGNMENT GOTO
;typo、入力途中など。次の行は変わってないですよね
PRINTFROM RETRUN ALIGNME GOT


;--------------------------------------------------------------------
;制御系構文
;[強調キーワード2]
;--------------------------------------------------------------------
IF ELSEIF SELECTCASE WEND REND
;TRYC系も命令文よりは制御構文に近いと考え、こちらに入れました
TRYCALL FUNCTION
TRYCCALL FUNCTION
	RETURN 1
CATCH
	RETURN 0
ENDCATCH

;ランダム文字列を出すDATA系も、構文があるので制御系にまわしました
PRINTDATA (数値変数：省略可)
	DATA 文字
	DATAFORM FORM文字列
	DATALIST
		(DATA or DATAFORMの羅列)
	ENDLIST
ENDDATA

;typo、入力途中など。これも（ｒｙ
lF ELSIF SELECTCSAE WDEN REN
;※大文字小文字の判別を消しました（2014/7/3）


;--------------------------------------------------------------------
;予約語関係
;[強調キーワード3]
;--------------------------------------------------------------------
#PRI #LATER FORWARD BACK TURNEND LEFT CENTER RIGHT
;typo、入力途中。まあ一発で分かるか
#PRE #LATAR FORARD BAC TURNEN LEF CENTE


;--------------------------------------------------------------------
;数値型変数、LOCAL@FUNCTIONもここ
;[強調キーワード4]
;--------------------------------------------------------------------
A:10 TFLAG:0 LOCAL LOCAL@USERFUNCTION
;typoしてると色変わってないですよね
Ａ:10 TFALG:0 LOCA LOAL@USERFUNCTION


;--------------------------------------------------------------------
;文字列型変数、LOCALS@FUNCTIONもここ
;[強調キーワード5]
;--------------------------------------------------------------------
STR:10 TRAINNAME:0 LOCALS@USERFUNCTION
;typoしてると色変わってないですよね
SRT:10 TRIANNAME:0 LOALS@USERFUNCTION

;--------------------------------------------------------------------
;デバッグモード用の命令
;[強調キーワード6]
;--------------------------------------------------------------------
;デバッグモード専用命令
ASSERT 1
DEBUGPRINT DEBUGですよ

;なお、DEBUG用の変数は通常と区別していません。0とかから文字列として使うので。
__FILE__ __LINE__ __FUNCTION__ 

;--------------------------------------------------------------------
;Emueraで追加されている特殊コメント
;[コメント]
;--------------------------------------------------------------------
;ちょっと面倒かもしれないけど
;!;PRINTFORML Emueraだと実行されるよ！　PRINTFORMWがちゃんと色変わってる？
	;!;PRINTFORMW けど行頭の【;!;】はコメント色になってるよね？
;
;!;[SKIPSTART]
PRINTFORMW ここはEmueraだと実行されないのぜ。色全部コメントだろ？
PRINTFORMW けどeramakerだとちゃんと出るのぜ
;!;[SKIPEND]
PRINTFORMW ここはちゃんと表示される
[SKIPSTART]
Emuera専用のブロック型コメントの実装方法
eramakerで動作することを想定しない場合はこちらも可能……なんですが
色分けの観点からこれは却下させてもらいます
おとなしく;!;[SKIPSTART]～;!;[SKIPEND]のコメントアウトスタイルをとってください
（上の行でコメントアウトされているように見えますが、誤爆です。PRINTとかではしっかりと表示されます）
[SKIPEND]

IF A == 0  ;行末コメントに対応してみたけど
PRINT 本当はこの行全部が表示されるけど;PRINTはコメント誤爆します。これはもう無理

;********************************************************************
;***[SKIPSTART]～[SKIPEND]が上手くコメントアウトされていない場合
;	タイプ別設定→カラーの右欄にある『コメントスタイル』
;	ブロック型に次の書式がセットされているか確認してください
;	;!;[SKIPSTART]  ～  ;!;[SKIPEND]
;
;	行型には;のみ
;********************************************************************


;--------------------------------------------------------------------
;ユーザー定義の関数
;[正規表現キーワード1]
;--------------------------------------------------------------------
;関数はちょっと内容盛りだくさんなので気をつけて確認してください

;【1】関数宣言について
;インデント禁止: 関数宣言の時点で入れ子関係が全て破棄され、一番浅いインデントとなる必要があるから
;もっとも、インデントが入っていても動作には関係ありませんので、見た目のみの問題です
@FUNCTION
 @FUNCTION
	@FUNCTION

;Emueraの特殊コメント【;!;】にも対応していますが、【;!;】の前後における空白の挿入は同様に禁止しています。
;!;@FUNCTION
;!;	@FUNCTION
	;!;@FUNCTION

;Emueraでの推奨設定に適さない関数名は禁止しています
@FUNCTION1
@Fuction1
@ふぁんくしょん
;ダメな例
@1FUNCTION

;【2】関数宣言での引数の与え方について
;引数定義はコンマと括弧の両方に対応しています
	;コンマの注意点： コンマの後ろに続けて文字を書くことを推奨しません
	;  括弧の注意点： 括弧は（と）がペアになるまで関数名の色が変わらなくなっています
@FUNCTION, ARG:0
@FUNCTION(ARG:0, ARG:1)
@FUNCTION , ARG:0
@FUNCTION (ARG:0, ARG:1)

;ダメな例
;コンマの後ろにはスペースを入れてください
@FUNCTION,ARG:0
;コンマ忘れ
@FUNCTION ARG:0
;括弧閉じられてない
@FUNCTION(ARG:0, ARG:1
;こういうことをすると上手く認識できませんので、引数はシンプルな形でお願いします
;2011/11/20追記：　関数宣言（@FUNCTION～）で複数括弧は式中関数から除外できるように
@FUNCTION(ARG:0, ARG:(ARG))

;【3】関数呼び出し時について
;基本的には宣言のときと同じ形式になりますが、違いもあります
;CALLやJUMPの次には半角スペースを”一文字だけ入れて”関数名としてください
;これは色分けのルールを上手く作れないことが原因ですが、見栄え的にも統一性のあるコードのほうがいいとは思います
CALL FUNCTION
CALL  FUNCTION

;引数を与える場合は関数宣言と基本的には同じルールが適用されます
CALL FUNCTION, LOCAL
CALL FUNCTION(LOCAL)

;ダメな例
;コンマ忘れ
CALL FUNCTION LOCAL
;括弧閉じ忘れ
CALL FUNCTION (LOCAL

;括弧に関しては入れ子どころか括弧対が不完全でも、（～）が存在すれば色が変わってしまいます。ご了承ください
CALL FUNCTION(LOCAL, A:(B))
CALL FUNCTION , LOCAL, A:(B)

;括弧の入れ子には対応しました。（～）が成立しない場合には色が変わりません(2014/7/5)
CALL FUNCTION(LOCAL, A:(B)
;が、文字列として")"が出てくるとやっぱり誤爆します
CALL FUNCTION(LOCAL, A:( ")")

;FORMが付いた場合も同様です
CALLFORM FUNCTION_{TFLAG:200}_%LOCALS:100% (   )
CALLFORM FUNCTION_%LOCALS:100%_{TFLAG:200} (   )
CALLFORM AAA_{CCC:XXX}_%LOCALS%
CALLFORM %LOCALS%, LOCAL
;ダメな例
CALLFORM %LOCALS% LOCAL
;数字で始まる関数名もアウトになりました
CALLFORM 0000FUNCTION

;【4】式中関数呼び出し時について
;式中関数についてですが、ユーザー定義関数とEmuera組み込み関数は区別できません
A = GETCHARA(LOCAL)
B = USERFUNCTION(LOCAL)

;また、(～)が存在すれば括弧が成立していなくても色が変わってしまいます。ご了承ください
;2014/7/2追記：直しました
C = BAD_FUNCTION(LOCAL, A:(B))
C = BAD_FUNCTION(LOCAL, A:(B)

;組み込み関数のtypo防止のために、閉じ括弧をつける前に色分けが行われているか確認してください
A = GETCHARA(LOCAL
;こっちはtypoか、ユーザー定義関数
A = GETCAHRA(LOCAL

;数字で始まる関数は認識されません。これはEmueraでの関数名の推奨に従うためです
B = 1USERFUNCTION(LOCAL)

;IF文などの制御構文、RETURNなど一部の命令は、直後に括弧が入っても式中関数とはみなされません
;funaさんサンキュー(2014/09)。一部書き換えています。
	IF (1 + 1) / 2
	CASE (1 + 1)
	RETURN (TEST)

;--------------------------------------------------------------------
;予約済みのイベント関数
;[正規表現キーワード2]
;--------------------------------------------------------------------
@EVENTTRAIN
;!;@EVENTTRAIN
;禁則事項はユーザー定義関数と同じです。
	@EVENTTRAIN
	;!;@EVENTTRAIN

;イベント関数には引数を与えることを想定していませんので、ユーザー定義関数と同じ色になります
@EVENTTRAIN, ARG:0


;--------------------------------------------------------------------
;予約済みの関数
;[正規表現キーワード3]
;--------------------------------------------------------------------
@SHOW_SHOP
;!;@SHOW_SHOP
;禁則事項はユーザー定義関数と同じです。
	@SHOW_SHOP
	;!;@SHOW_SHOP

;イベント関数には引数を与えることを想定していませんので、ユーザー定義関数と同じ色になります
@SHOW_SHOP, ARG:0


;--------------------------------------------------------------------
;ラベルの定義
;[正規表現キーワード4]
;--------------------------------------------------------------------
$TEST
;!;$INPUT_LOOP

;ラベルに使える文字は関数名と同じ……らしぃので同一対応
$test
$1TEST
$てすと

;$マーク以降はスペースを含んではいけません
$INPUT LOOP
$ INPUTLOOP
$INPUT_LOOP 

;GOTO構文も同じ色分けとルールで運用しています
GOTO INPUT_LOOP
GOTO 1INPUT_LOOP
GOTO INPUT LOOP
GOTO INPUT_LOOP{A}
GOTOFORM INPUT_LOOP{A}


;--------------------------------------------------------------------
;{}で囲まれた部分
;[正規表現キーワード5]
;--------------------------------------------------------------------
; {TFLAG:0}の色が変わっていることを確認
PRINTFORMW TFLAG:0は{TFLAG:0}に設定されています。

;{}のペアが失敗してると変な風になります
PRINTFORMW TFLAG:0は{TFLAG:0に設定されています。


;--------------------------------------------------------------------
;%%で囲まれた部分
;[正規表現キーワード6]
;--------------------------------------------------------------------
; %CALLNAME:MASTER% が色が変わっていることを確認
PRINTFORMW CALLNAME:MASTERは%CALLNAME:MASTER%に設定されています。

;%の対が失敗してると変な風になります
PRINTFORMW CALLNAME:MASTERはCALLNAME:MASTER%に設定されています。

;--------------------------------------------------------------------
;ERBで数字として使える数字表記全般。Emuera専用記法も含む
;[正規表現キーワード7]
;--------------------------------------------------------------------
1234 1.234 0x11AaFc 0b1110 1p33 0.112 10.121
;typoの例。少しは見分けられるかしら？
1.2345.678 1x1a11 1,1221 0x11r12 1b11012 1p1.11 0X11AG
;『1,1221』が色が変わっているのは小数点がピリオドじゃなくてコンマだからです。
;詳しくは一番下を見てください

;--------------------------------------------------------------------
;_Rename.csvによる置換対象文字列
;[強調キーワード8] + [コメント]
;--------------------------------------------------------------------
;[[～～]]で囲んだ部分をあらかじめ_Rename.csvで指定したものに置換する機能がEmueraにあります。
;【家, テスト】と定義している場合、次のように置換されるらしいです。
ここに[[テスト]]を建てよう
ここに家を建てよう

;--------------------------------------------------------------------
;Emueraの特殊ブロック
;[正規表現キーワード9]
;--------------------------------------------------------------------
[IF XXX]
[ELSEIF XXX]
[ELSE]
[ENDIF]
[IF_DEBUG]
[ENDIF]
[IF_NDEBUG]
[ENDIF]

;--------------------------------------------------------------------
;おまけ（３連記号）
;--------------------------------------------------------------------
PRINTFORMW それぞれeramaker時代の名残（Emueraでも再現？）
PRINT ***　→　NAME:TARGET
PRINT +++　→　CALLNAME:MASTER
PRINT $$$　→　CALLNAME:TARGET
PRINT ///　→　NAME:ASSI
PRINT ===　→　CALLNAME:PLAYER

;--------------------------------------------------------------------
;{～}と%～%について補足
;--------------------------------------------------------------------
;CALLFORMなど、呼び出し系FORMでは色が変わりませんが
;括弧のペアをしくじっているとそもそもの色分けに失敗するのですぐ分かるかと思います
CALLFORM FUNCTION_{CFLAG:100}_%LOCALS%
CALLFORM FUNCTION_{{CFLAG:100}
JUMPFORM FUNCTION_%LOCALS

;括弧の中の変数や文法が間違っていてもこのままだと分かりませんが
;閉じ括弧を入れる前に変数の色分けができてるか確認すれば少しはわかりますかね
PRINTFORMW TFLAG:0は{TFLAG:0
PRINTFORMW CALLNAME:MASTERは%CALLNAME:MASTER
PRINTFORMW TFLAG:0は{TFALG:0
PRINTFORMW CALLNAME:MASTERは%CALNAME:MASTER

;ちなみにFORM系じゃなくてもこの色分けは炸裂します。これはどうしようもない
PRINT これ（{A}）とか、こっち（%B%）とか
A = B % C + D % E

;--------------------------------------------------------------------
;ダブルクォーテーション
;--------------------------------------------------------------------
;いわゆる引用符と呼ばれるものです
CHKFONT "ＭＳ 明朝"
;行内で閉じられていない場合、色が変わりません
CHKFONT "ＭＳ 明朝
SETFONT ＭＳ 明朝"


;--------------------------------------------------------------------
;その他、よくありそうなエラーや見栄えが悪くなるもの
;[正規表現キーワード10]
;--------------------------------------------------------------------
;添付のカラーだと赤背景に白抜き文字というめちゃくちゃ目立つように設定しました。
;(1) 引数を与えてはいけない命令に引数を与えている場合
	;即改行すべきものなので、スペースを入れた時点でアウトにしています

	;例えばELSEIFとELSEの取り違え
	ELSE
	ELSEIF TFLAG:10 >= 0
	ELSE 
	ELSE TFLAG:10 >= 0

	;例えばSELECTCASEのCASEELSE
	CASEELSE
	CASE 0 TO 100
	CASEELSE 
	CASEELSE 0 TO 100

	;INPUTやRENDなど、引数が不要な奴は全部引っかかるように
	;これはもう、不要なものを入れない癖をつけるためのようなもん
	REND 
	INPUT 
	RESTART 
	BREAK 

	;行末コメントは検出しないように(2014/7/6)
	ENDIF ;ヒャッハー

;(2) やや趣味の領域ですが、コンマの後ろには空白を必ず入れてください
;前には入れなくてもかまいません（はっきり分けたいなら入れてもいいですが）
	;ちなみにコンマの後ろにスペースを入れることは英文法の正しいルールでもあります
	CALL FUNCTION, LOCAL:0, LOCAL:1, LOCAL:2
	CALL FUNCTION,LOCAL:0,LOCAL:1, LOCAL:2
	;TIMESで小数点をコンマに間違える人が居るのでのぉ……
	TIMES LOCAL, 0.5
	TIMES LOCAL, 0,5

;(3) 配列を書くときにセミコロンを入れている場合
	;どうしても誤爆しちゃうものもあるけど許して
	SIF CFLAG;150 + TFLAG:150 
		PRINTFORMW A;B;C とかも色が変わるのでいやな人は削除してください
	;(?<=^|[ \t　])[a-zA-Z]+(;([a-zA-Z]+|[0-9]+))+(?=[ \t　\r\n])

;(4) 行頭のインデントをタブ文字のみに制限
	;好みの問題なので気になる人は
	;^[^\t\w\W$&&[^　 ]]+(?=\w|;)
	;を削除すればOKです
	PRINT GOOD
    PRINT BAD（半角スペース）
　　PRINT BAD（全角スペース）
